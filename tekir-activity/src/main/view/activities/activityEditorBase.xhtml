<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://java.sun.com/jsf/composite/telveComponents"
                xmlns:p="http://primefaces.org/ui"                
                template="/layout/dialogBase.xhtml">

    <ui:define name="form">
        <h:form id="activityEditor">

            <div class="row">
                <t:inputEnum value="#{bean.entity.direction}" label="activity.label.Direction" itemLabel="activity.direction." hasNullValue="false" columnClass="col-xs-6" disabled="#{bean.entity.direction eq 'NONE'}"/>
                <t:inputEnum value="#{bean.entity.priority}" label="activity.label.Priority" itemLabel="activity.priority." hasNullValue="false" columnClass="col-xs-6"/>
            </div>

            <div class="row">
                <t:inputText label="activity.label.Subject" value="#{bean.entity.subject}" required="true" columnClass="col-xs-12"/>
                <t:inputTextarea label="activity.label.Body" value="#{bean.entity.body}" columnClass="col-xs-12"/>
            </div>

            <ui:insert name="editorContent" />

            <ui:remove>
            <div class="row">
                <t:inputDateTime label="activity.label.DueDate" value="#{bean.entity.dueDate}" columnClass="col-xs-6"/>
                <t:inputUser label="general.label.Assignee" value="#{bean.entity.assignee}" hasNotSelected="true" required="true"  columnClass="col-xs-6"/>
                <ui:remove>
                    <t:inputText label="activity.label.Duration" value="#{bean.entity.duration}" columnClass="col-xs-6"/>
                </ui:remove>
            </div>
                </ui:remove>

            <ui:insert name="assignment" />

                        <ui:remove>
            <div class="row">
                <t:inputLookupDialog label="contact.label.Person" value="#{bean.entity.person}" lookupBean="#{contactLookup}" lookupListener="meetingActivityController.entity.person" placeholder="#{messages['contact.info.Person']}" lookupProfile="T:Person" columnClass="col-xs-6"/>
                <t:inputLookupDialog label="general.label.Corporation" value="#{bean.entity.corporation}" lookupBean="#{contactLookup}" lookupListener="meetingActivityController.entity.corporation" placeholder="#{messages['general.info.Corparation']}" lookupProfile="T:Corporation" columnClass="col-xs-6"/>
            </div>



                <div class="row">
                    <t:inputSuggestion label="general.label.Reason" value="#{bean.entity.statusReason}" group="#{bean.entity.class.simpleName}" listener="" columnClass="col-xs-12"/>
                    <t:inputTextarea label="general.label.Info" value="#{bean.entity.info}" columnClass="col-xs-12"/>
                    <t:inputTextarea label="general.label.ResultNote" value="#{bean.entity.resultNote}" columnClass="col-xs-12"/>
                </div>
            </ui:remove>


            <h:panelGroup styleClass="row" style="padding-top: 8px;" layout="block" >
                <div class="col-xs-12">
                    <ui:insert name="actionButtons" />

                    <ui:remove>
                        <div class="pull-left">
                            <p:commandButton id="wsws" 
                                             value="#{messages['general.button.Close']}" 
                                             icon="fa fa-check" 
                                             validateClient="true"
                                             styleClass="btn-warning" 
                                             onclick="PF('www').show();"
                                             rendered="#{not bean.followupDlg}"/>
                        </div>
                    </ui:remove>

                    <div class="pull-right">


                        <p:commandButton id="save" 
                                         value="#{messages['general.button.Save']}" 
                                         icon="fa fa-save" 
                                         action="#{bean.save()}" 
                                         validateClient="true"
                                         styleClass="btn-primary" />
                        <p:commandButton id="close" 
                                         value="#{messages['general.button.Cancel']}" 
                                         icon="ui-icon-close" 
                                         action="#{bean.cancel()}" 
                                         partialSubmit="true" 
                                         process="@this"/>
                    </div>
                </div>
            </h:panelGroup>


            <p:dialog id="www" widgetVar="www" header="#{messages['general.label.Result']}" modal="true">
                <div class="row">
                    <ui:remove>
                        <t:inputEnum value="#{bean.entity.status}" label="activity.label.Status" itemLabel="activity.status." hasNullValue="false" columnClass="col-xs-6"/>
                    </ui:remove>
                    <t:inputCombobox label="general.label.Status" value="#{bean.entity.status}" columnClass="col-xs-12">
                        <f:selectItem itemLabel="#{messages['activity.status.SCHEDULED']}" itemValue="SCHEDULED" /> 
                        <f:selectItem itemLabel="#{messages['activity.status.SUCCESS']}" itemValue="SUCCESS" /> 
                        <f:selectItem itemLabel="#{messages['activity.status.FAILED']}" itemValue="FAILED" /> 
                    </t:inputCombobox>
                    <ui:remove>
                        //TODO: followup i√ßin
                        <t:inputCombobox label="activity.label.FollowUp" value="#{bean.followupActivity}">
                            <f:selectItem itemLabel="NONE" itemValue="NONE" /> 
                            <f:selectItems value="#{activityWidget.addableActivities}" var="act" itemLabel="#{messages['activity.button.label.'.concat(act)]}" itemValue="#{act}" />
                        </t:inputCombobox>
                    </ui:remove>
                    <t:inputSuggestion label="general.label.Reason" value="#{bean.entity.statusReason}" group="#{bean.entity.class.simpleName}" listener="" columnClass="col-xs-12"/>
                    <t:inputTextarea label="general.label.ResultNote" value="#{bean.entity.resultNote}" columnClass="col-xs-12"/>
                </div>
                <div class="pull-right">
                    <p:commandButton id="success" 
                                     value="#{messages['general.button.Ok']}" 
                                     icon="fa fa-check" 
                                     action="#{bean.save()}" 
                                     validateClient="true"
                                     styleClass="btn-success" >
                        <p:ajax event="dialogReturn" listener="#{bean.cancel}" partialSubmit="true" process="@this" />   
                    </p:commandButton>
                </div>
            </p:dialog>
        </h:form>



    </ui:define> 
</ui:composition>