<ui:composition xmlns="http://www.w3.org/1999/xhtml"               
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:t="http://java.sun.com/jsf/composite/telveComponents"
                template="/layout/masterViewBase.xhtml">

    <ui:define name="content">     


        <div class="row">
            <div class="col-md-4 col-xs-12">

                <div class="row">
                    <t:outputFeatureLink label="general.label.Source" value="#{featureController.getFeatureLink(contactHome.entity.sourcePointer)}" columnClass="col-xs-12"/>
                </div>

                <ui:fragment rendered="#{contactHome.entity.class.simpleName eq 'Person'}">
                    <div class="row">
                        <t:outputText label="general.label.FirstName" value="#{contactHome.entity.firstName}" columnClass="col-xs-12"/>
                        <t:outputText label="general.label.LastName" value="#{contactHome.entity.lastName}" columnClass="col-xs-12"/>
                        <t:outputText label="contact.label.JobTitle" value="#{contactHome.entity.jobTitle}" columnClass="col-xs-12"/>
                        <t:outputText label="contact.label.CorporationName" value="#{contactHome.entity.corporationName}" rendered="#{empty contactHome.entity.corporation}" columnClass="col-xs-12"/>
                        <t:outputEntityLink label="general.label.Corporation" value="#{contactHome.entity.corporation}" view="/contact/contactView.xhtml" rendered="#{not empty contactHome.entity.corporation}" columnClass="col-xs-12"/>
                        <t:outputText label="contact.label.SSN" value="#{contactHome.entity.ssn}" columnClass="col-xs-12"/>
                    </div>            
                </ui:fragment>

                <ui:fragment rendered="#{contactHome.entity.class.simpleName eq 'Corporation'}">
                    <div class="row">
                        <t:outputText label="general.label.OrganizationName" value="#{contactHome.entity.organizastionName}" columnClass="col-xs-12"/>
                        <t:outputText label="contact.label.CorporationType" value="#{contactHome.entity.corporationType.name}"  columnClass="col-xs-12"/>
                        <t:outputEntityLink label="contact.label.PrimaryContact" value="#{contactHome.entity.primaryContact}" view="/contact/contactView.xhtml" columnClass="col-xs-12"/>
                        <t:outputEntityLink label="contact.label.ParentCorporation" value="#{contactHome.entity.parentCorporation}" view="/contact/contactView.xhtml" columnClass="col-xs-12"/>
                    </div>            
                </ui:fragment>

                <div class="row">
                    <t:outputText label="general.label.Category" value="#{contactHome.entity.category.name}" columnClass="col-xs-12"/>
                    <t:outputText label="general.label.Industry" value="#{contactHome.entity.industry.name}" columnClass="col-xs-12"/>
                    <t:outputText label="general.label.Territory" value="#{contactHome.entity.territory.name}" columnClass="col-xs-12"/>
                </div>

            </div>

            <div class="col-md-4 col-xs-12">

                <ui:include src="/activities/activityWidget.xhtml">
                    <ui:param name="person" value="#{contactHome.entity.class.simpleName eq 'Corporation' ? contactHome.entity.primaryContact : contactHome.entity}" />
                    <ui:param name="corporation" value="#{contactHome.entity.class.simpleName eq 'Person' ? contactHome.entity.corporation : contactHome.entity}" />
                    <ui:param name="feature" value="#{null}" />
                    <ui:param name="attached" value="#{contactHome.entity.class.simpleName}" />
                </ui:include>
                
                <t:accordion icon="fa fa-sticky-note" id="cn" label="general.label.Notes" columnClass="col-xs-12">
                    Notlar
                </t:accordion>

                <t:accordion icon="fa fa-feed" id="cs" label="general.label.Feed" columnClass="col-xs-12">
                    <ul class="products-list product-list-in-box">
                        <ui:repeat value="#{feedController.getFeeds(contactHome.entity.class.simpleName, contactHome.entity.id)}" var="feed">
                            <li class="item">
                                <div class="product-img">
                                    <span class="fa-stack">
                                        <i class="fa #{messages['feederIcon.'.concat(feed.feeder)]} fa-2x" style="color: #999;"/>
                                        <i class="fa #{messages['feederIcon.'.concat(feed.type)]} fa-1x" style="color: green; position: absolute; bottom: -10px; right: 0px;"/>
                                    </span>
                                </div>
                                <div class="product-info">
                                    <span class="product-title">#{feed.subject}</span>
                                    <span class="product-description text-sm">
                                        <h:outputText value="#{feed.body}" escape="false" />
                                    </span>
                                    <span class="product-description text-sm"><t:cellOutputFeatureLink value="#{featureController.getFeatureLink(feed.basePointer)}" /></span>
                                    <span class="product-description text-sm">
                                        <i class="fa fa-user"/> #{userLookup.getUserName(feed.user)} 
                                        <i class="fa  fa-clock-o"/> <t:cellOutputDateTime value="#{feed.date}"/></span>
                                </div>
                            </li>
                        </ui:repeat>
                    </ul>
                </t:accordion>
            </div>

            <div class="col-md-4 col-xs-12">
                <div class="row">
                    <ui:include src="/contact/contactInfosFragment.xhtml">
                        <ui:param name="contact" value="#{contactHome.entity}" />
                        <ui:param name="contactInformations" value="#{contactHome.contactInformations}" />
                    </ui:include>

                    <ui:include src="/contact/relatedContactFragment.xhtml">
                        <ui:param name="contact" value="#{contactHome.entity}" />
                        <ui:param name="relatedContacts" value="#{contactHome.relatedContacts}" />
                        <ui:param name="relatedContactsRevers" value="#{contactHome.relatedContactsRevers}" />
                    </ui:include>
                </div>
            </div>

        </div>
    </ui:define>

</ui:composition>