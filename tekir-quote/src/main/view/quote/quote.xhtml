<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://java.sun.com/jsf/composite/telveComponents"
                xmlns:p="http://primefaces.org/ui"                
                template="/layout/editBase.xhtml">

    <ui:param name="homeBean" value="#{quoteHome}" />
    <ui:param name="entity" value="#{quoteHome.entity}" />

    <ui:define name="form">
        <div class="row">

            <div class="col-md-6 col-xs-12">
                <div class="row">
                    <t:inputLookupDialog label="general.label.Account" value="#{quoteHome.entity.account}" lookupBean="#{contactLookup}" lookupListener="quoteHome.entity.account" placeholder="#{messages['general.info.Account']}" />
                    <t:inputMoneyAndCCY label="Paralalalala" value="#{quoteHome.entity.total}" required="true"/>
                    <t:inputCurrency label="general.label.Currency" value="#{quoteHome.entity.total.currency}" required="true"/>
                    <t:inputMoney label="qoute.label.Total" value="#{quoteHome.entity.total.amount}" currency="#{quoteHome.entity.total.currency}" required="true"/>
                </div>
            </div>

            <div class="col-md-6 col-xs-12">
                <div class="row">
                    <t:inputText label="voucher.label.VoucherNo" value="#{quoteHome.entity.voucherNo}"  required="true" columnClass="col-xs-12"/>
                    <t:inputText label="voucher.label.ReferenceNo" value="#{quoteHome.entity.referenceNo}" columnClass="col-xs-12"/>
                    <t:inputText label="voucher.label.Process" value="#{quoteHome.entity.processId}" columnClass="col-xs-12"/>
                    <t:inputText label="voucher.label.Owner" value="#{quoteHome.entity.owner}" columnClass="col-xs-12"/>
                    <t:inputText label="general.label.Code" value="#{quoteHome.entity.code}" columnClass="col-xs-12"/>
                    <t:inputTextarea label="general.label.Info" value="#{quoteHome.entity.info}" columnClass="col-xs-12"/>
                    <t:inputDate label="voucher.label.Date" value="#{quoteHome.entity.date}" columnClass="col-xs-12"/>
                </div>
            </div>
        </div>

        <div class="row">
            <p:dataTable id="its" value="#{quoteHome.entity.items}" var="item" editable="true" editMode="cell" styleClass="col-xs-12">
                <p:column headerText="Ürün">
                    <p:cellEditor>
                        <f:facet name="output"><h:outputText value="#{item.commodity}" /></f:facet>
                        <f:facet name="input"><p:inputText value="#{item.commodity}" /></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Açıklama">
                    <p:cellEditor>
                        <f:facet name="output"><h:outputText value="#{item.info}" /></f:facet>
                        <f:facet name="input"><p:inputText value="#{item.info}" /></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Miktar" style="text-align: right; width: 12em;">
                    <p:cellEditor>
                        <f:facet name="output"><h:outputText value="#{item.quantity.amount}" /></f:facet>
                        <f:facet name="input"><p:inputNumber value="#{item.quantity.amount}" /></f:facet>
                    </p:cellEditor>

                </p:column>
                <p:column headerText="Birim" style="width: 10em;">
                    <p:cellEditor>
                        <f:facet name="output"><h:outputText value="#{item.quantity.unitName.name}" /></f:facet>
                        <f:facet name="input"><t:inputUnit label="" value="#{item.quantity.unitName}" /></f:facet>
                    </p:cellEditor>

                </p:column>
                
                <p:column style="text-align: right; width: 12em;" headerText="Fiyat">
                     
                    <p:cellEditor>
                        <f:facet name="output"><t:cellOutputMoney value="#{item.price.amount}" currency="#{quoteHome.entity.total.currency}" /></f:facet>
                        <f:facet name="input"><t:cellInputMoney value="#{item.price.amount}" currency="#{quoteHome.entity.total.currency}" /></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column style="text-align: right; width: 12em;" headerText="Tutar">
                    <p:cellEditor>
                        <f:facet name="output"><t:cellOutputMoney value="#{item.total.amount}" currency="#{quoteHome.entity.total.currency}" /></f:facet>
                        <f:facet name="input"><t:cellInputMoney value="#{item.total.amount}" currency="#{quoteHome.entity.total.currency}" /></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column styleClass="actionColumn">
                    <f:facet name="header">
                        <p:commandLink action="#{quoteHome.addItem()}" process="@this" update=":form:ite" oncomplete="PF('ite').show();">
                            <i class="fa fa-plus"/>
                        </p:commandLink>
                    </f:facet>
                    <ui:remove>
                    <p:rowEditor />
                    </ui:remove>
                    <i class="fa fa-trash" />
                </p:column>
            </p:dataTable>
        </div>

        <p:dialog header="İtem" id="ite" widgetVar="ite" >
            <p:outputPanel styleClass="row" layout="block" rendered="#{ not empty quoteHome.selectedItem}">
                <t:inputLookupDialog label="general.label.Commodity" value="#{quoteHome.selectedItem.commodity}" lookupBean="#{commodityLookup}" lookupListener="quoteHome.selectedItem.commodity" placeholder="#{messages['general.info.Commodity']}" />
                
                <t:inputText label="general.label.Info" value="#{quoteHome.selectedItem.info}" columnClass="col-xs-12"/>
                <t:inputQuantity label="general.label.Quantity" value="#{quoteHome.selectedItem.quantity}" columnClass="col-xs-12"/>
                <t:inputMoneyAndCCY label="general.label.Total" value="#{quoteHome.selectedItem.total}" columnClass="col-xs-12"/>
                <t:inputMoneyAndCCY label="general.label.Price" value="#{quoteHome.selectedItem.price}" columnClass="col-xs-12"/>
                <div class="actionButtons">
                    <p:commandButton action="#{quoteHome.saveItem()}" value="Sakla" oncomplete="PF('ite').hide();" update="its" ajax="true" process="@(ite)"/>
                </div>
            </p:outputPanel>
        </p:dialog>

    </ui:define> 
</ui:composition>